!function(e,t,n,d){function i(e,t){this.masterSelect=jQuery(e),this.dependentSelect=jQuery(t),this.dependentHtml=this.dependentSelect.html(),this.updateDependentSelect(),this.masterSelect.change(jQuery.proxy(this.updateDependentSelect,this))}e.fn.dependentDropdown=function(e){return this.each(function(){new i(this,e)})},i.prototype={constructor:i,updateDependentSelect:function(){if(""===this.masterSelect.val())this.dependentSelect.prop("disabled","disabled");else{var t=this.masterSelect.val(),n=e(this.dependentHtml).filter("optgroup[label='"+t+"']").find("option");n.length>1?(this.dependentSelect.html(n),this.dependentSelect.prop("disabled",!1)):(this.dependentSelect.html('<option value="">none available</option>'),this.dependentSelect.prop("disabled",!0))}}}}(jQuery,window,document);
!function(){var t,e,s,i,r,o={}.hasOwnProperty,n=function(t,e){function s(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t};i=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,s,i,r,o,n;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),o=t.childNodes,n=[],i=0,r=o.length;r>i;i++)s=o[i],n.push(this.add_option(s,e,t.disabled));return n},t.prototype.add_option=function(t,e,s){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:s===!0?s:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t.prototype.escapeExpression=function(t){var e,s;return null==t||t===!1?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(s,function(t){return e[t]||"&amp;"})):t},t}(),i.select_to_array=function(t){var e,s,r,o,n;for(s=new i,n=t.childNodes,r=0,o=n.length;o>r;r++)e=n[r],s.add_node(e);return s.parsed},e=function(){function t(e,s){this.form_field=e,this.options=null!=s?s:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},t.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return t.blur_test()},100))},t.prototype.results_option_build=function(t){var e,s,i,r,o;for(e="",o=this.results_data,i=0,r=o.length;r>i;i++)s=o[i],e+=s.group?this.result_add_group(s):this.result_add_option(s),(null!=t?t.first:void 0)&&(s.selected&&this.is_multiple?this.choice_build(s):s.selected&&!this.is_multiple&&this.single_set_selected_text(s.text));return e},t.prototype.result_add_option=function(t){var e,s;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),s=document.createElement("li"),s.className=e.join(" "),s.style.cssText=t.style,s.setAttribute("data-option-array-index",t.array_index),s.innerHTML=t.search_text,this.outerHTML(s)):""},t.prototype.result_add_group=function(t){var e;return(t.search_match||t.group_match)&&t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):""},t.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},t.prototype.reset_single_select_options=function(){var t,e,s,i,r;for(i=this.results_data,r=[],e=0,s=i.length;s>e;e++)t=i[e],t.selected?r.push(t.selected=!1):r.push(void 0);return r},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,s,i,r,o,n,h,l,c,a,_;for(this.no_results_clear(),i=0,o=this.get_search_text(),t=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),l=new RegExp(t,"i"),s=this.get_search_regex(t),_=this.results_data,c=0,a=_.length;a>c;c++)e=_[c],e.search_match=!1,r=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(r=this.results_data[e.group_array_index],0===r.active_options&&r.search_match&&(i+=1),r.active_options+=1),(!e.group||this.group_search)&&(e.search_text=e.group?e.label:e.text,e.search_match=this.search_string_match(e.search_text,s),e.search_match&&!e.group&&(i+=1),e.search_match?(o.length&&(n=e.search_text.search(l),h=e.search_text.substr(0,n+o.length)+"</em>"+e.search_text.substr(n+o.length),e.search_text=h.substr(0,n)+"<em>"+h.substr(n)),null!=r&&(r.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),1>i&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.get_search_regex=function(t){var e;return e=this.search_contains?"":"^",new RegExp(e+t,"i")},t.prototype.search_string_match=function(t,e){var s,i,r,o;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(i=t.replace(/\[|\]/g,"").split(" "),i.length))for(r=0,o=i.length;o>r;r++)if(s=i[r],e.test(s))return!0},t.prototype.choices_count=function(){var t,e,s,i;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,i=this.form_field.options,e=0,s=i.length;s>e;e++)t=i[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){return t.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},t.prototype.keyup_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(){var t=this;return setTimeout(function(){return t.results_search()},50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected)&&(!(!this.display_disabled_options&&t.disabled)&&!t.empty)},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){return this.touch_started?this.search_results_mouseup(t):void 0},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!/iP(od|hone)/i.test(window.navigator.userAgent)&&(!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),t=jQuery,t.fn.extend({chosen:function(i){return e.browser_is_supported()?this.each(function(){var e,r;e=t(this),r=e.data("chosen"),"destroy"===i&&r instanceof s?r.destroy():r instanceof s||e.data("chosen",new s(this,i))}):this}}),s=function(e){function s(){return r=s.__super__.constructor.apply(this,arguments)}return n(s,e),s.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},s.prototype.set_up_html=function(){var e,s;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),s={class:e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(s.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",s),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},s.prototype.register_observers=function(){var t=this;return this.container.bind("touchstart.chosen",function(e){t.container_mousedown(e)}),this.container.bind("touchend.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},s.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},s.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},s.prototype.container_mousedown=function(e){return this.is_disabled||(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null!=e&&t(e.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},s.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},s.prototype.search_results_mousewheel=function(t){var e;return t.originalEvent&&(e=t.originalEvent.deltaY||-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e?(t.preventDefault(),"DOMMouseScroll"===t.type&&(e*=40),this.search_results.scrollTop(e+this.search_results.scrollTop())):void 0},s.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},s.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},s.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},s.prototype.test_active_click=function(e){var s;return s=t(e.target).closest(".chosen-container"),s.length&&this.container[0]===s[0]?this.active_field=!0:this.close_field()},s.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},s.prototype.result_do_highlight=function(t){var e,s,i,r,o;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),i=parseInt(this.search_results.css("maxHeight"),10),o=this.search_results.scrollTop(),r=i+o,s=this.result_highlight.position().top+this.search_results.scrollTop(),e=s+this.result_highlight.outerHeight(),e>=r)return this.search_results.scrollTop(e-i>0?e-i:0);if(o>s)return this.search_results.scrollTop(s)}},s.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},s.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},s.prototype.update_results_content=function(t){return this.search_results.html(t)},s.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},s.prototype.set_tab_index=function(){var t;return this.form_field.tabIndex?(t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t):void 0},s.prototype.set_label_behavior=function(){var e=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()}):void 0},s.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},s.prototype.search_results_mouseup=function(e){var s;return s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),s.length?(this.result_highlight=s,this.result_select(e),this.search_field.focus()):void 0},s.prototype.search_results_mouseover=function(e){var s;return s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),s?this.result_do_highlight(s):void 0},s.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},s.prototype.choice_build=function(e){var s,i,r=this;return s=t("<li />",{class:"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?s.addClass("search-choice-disabled"):(i=t("<a />",{class:"search-choice-close","data-option-array-index":e.array_index}),i.bind("click.chosen",function(t){return r.choice_destroy_link_click(t)}),s.append(i)),this.search_container.before(s)},s.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),e.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(t(e.target))},s.prototype.choice_destroy=function(t){return this.result_deselect(t[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},s.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},s.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},s.prototype.result_select=function(t){var e,s;return this.result_highlight?(e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),s=this.results_data[e[0].getAttribute("data-option-array-index")],s.selected=!0,this.form_field.options[s.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(s):this.single_set_selected_text(s.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[s.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},s.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},s.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},s.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},s.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},s.prototype.winnow_results_set_highlight=function(){var t,e;return e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null!=t?this.result_do_highlight(t):void 0},s.prototype.no_results=function(e){var s;return s=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),s.find("span").first().html(e),this.search_results.append(s),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},s.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},s.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},s.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},s.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},s.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},s.prototype.keydown_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:this.results_showing&&t.preventDefault();break;case 32:this.disable_search&&t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},s.prototype.search_field_scale=function(){var e,s,i,r,o,n,h,l,c;if(this.is_multiple){for(i=0,h=0,o="position:absolute; left: -1000px; top: -1000px; display:none;",n=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=n.length;c>l;l++)r=n[l],o+=r+":"+this.search_field.css(r)+";";return e=t("<div />",{style:o}),e.text(this.search_field.val()),t("body").append(e),h=e.width()+25,e.remove(),s=this.container.outerWidth(),h>s-10&&(h=s-10),this.search_field.css({width:h+"px"})}},s}(e)}.call(this);
function rmxId(e){return"x'"==e.substring(0,2)?e.substring(2,e.length-1):e}function xId(e){return"x'"==e.substring(0,2)?e:"x'"+e+"'"}var flexmls_connect={};flexmls_connect.report_options={absorption:[],inventory:[{label:"Active Listings",value:"ActiveListings",selected:!0},{label:"New Listings",value:"NewListings",selected:!0},{label:"Pended Listings",value:"PendedListings"},{label:"Sold Listings",value:"SoldListings"}],price:[{label:"Active Avg List Price",value:"ActiveAverageListPrice",selected:!0},{label:"New Avg List Price",value:"NewAverageListPrice",selected:!0},{label:"Pended Avg List Price",value:"PendedAverageListPrice"},{label:"Sold Avg List Price",value:"SoldAverageListPrice"},{label:"Sold Avg Sale Price",value:"SoldAverageSoldPrice"},{label:"Active Median List Price",value:"ActiveMedianListPrice",selected:!0},{label:"New Median List Price",value:"NewMedianListPrice",selected:!0},{label:"Pended Median List Price",value:"PendedMedianListPrice"},{label:"Sold Median List Price",value:"SoldMedianListPrice"},{label:"Sold Median Sale Price",value:"SoldMedianSoldPrice"}],ratio:[{label:"Sale to Original List Price Ratio",value:"SaleToOriginalListPriceRatio",selected:!0},{label:"Sale to List Price Ratio",value:"SaleToListPriceRatio"}],dom:[{label:"Average CDOM",value:"AverageCdom",selected:!0},{label:"Average ADOM",value:"AverageDom"}],volume:[{label:"Active List Volume",value:"ActiveListVolume",selected:!0},{label:"New List Volume",value:"NewListVolume",selected:!0},{label:"Pended List Volume",value:"PendedListVolume"},{label:"Sold List Volume",value:"SoldListVolume"},{label:"Sold Sale Volume",value:"SoldSaleVolume"}]},jQuery(document).ready(function(e){jQuery("#summary-views").keyup(function(){""!=jQuery(this).val()?jQuery("#summary-views-check").attr("checked","checked"):jQuery("#summary-views-check").removeAttr("checked")}),jQuery("#detail-views").keyup(function(){""!=jQuery(this).val()?jQuery("#detail-views-check").attr("checked","checked"):jQuery("#detail-views-check").removeAttr("checked")}),jQuery("#idx_frame_shortcode_docs_link").live("click",function(){return jQuery("#idx_frame_shortcode_docs").toggle("slow"),!1}),jQuery("select.flexmls_connect__property_type").live("change",function(){var e=jQuery(this).parent().parent(),l=jQuery("input.flexmls_connect__ma_tech_id",e).val(),t=[jQuery(":selected",jQuery(this)).val()];jQuery("input.flexmls_connect__location_search",e).trigger("changePropertyType",[[l],t]),jQuery("a.flexmls_connect__location_browse",e).trigger("changePropertyType",[[l],t])}),jQuery("select.flexmls_connect__stat_type").live("change",function(){var e=jQuery(this).parent().parent(),l=jQuery("select.flexmls_connect__stat_display",e),t=flexmls_connect.report_options[jQuery(":selected",this).val()];l.html("");for(var r=0;r<t.length;r++)jQuery("<option value='"+t[r].value+"' "+(t[r].selected?"selected='selected'":"")+">"+t[r].label+"</option>").appendTo(l)}),jQuery(".flexmls_connect__theme_selector").live("change",function(){var l=jQuery(this).parent().parent().parent(),t=jQuery(this).val();if(""!=t){var r={vert_round_light:{border:"round",orientation:"vertical",scheme:"light"},vert_round_dark:{border:"round",orientation:"vertical",scheme:"dark"},vert_square_light:{border:"square",orientation:"vertical",scheme:"light"},vert_square_dark:{border:"square",orientation:"vertical",scheme:"dark"},hori_round_light:{border:"round",orientation:"horizontal",scheme:"light"},hori_round_dark:{border:"round",orientation:"horizontal",scheme:"dark"},hori_square_light:{border:"square",orientation:"horizontal",scheme:"light"},hori_square_dark:{border:"square",orientation:"horizontal",scheme:"dark"}},i=jQuery("input[fmc-field='width']",l),o=jQuery("select[fmc-field='orientation']",l),n=jQuery("select[fmc-field='border_style']",l),c=jQuery("input[fmc-field='background_color']",l)[0],a=jQuery("input[fmc-field='title_text_color']",l)[0],s=jQuery("input[fmc-field='field_text_color']",l)[0],_=jQuery("input[fmc-field='detailed_search_text_color']",l)[0],u=jQuery("input[fmc-field='submit_button_background']",l)[0],d=jQuery("input[fmc-field='submit_button_text_color']",l)[0],p=r[t];"vertical"==p.orientation?(jQuery(i).val("300"),jQuery(o).val("vertical")):(jQuery(i).val("730"),jQuery(o).val("horizontal")),"round"==p.border?jQuery(n).val("rounded"):jQuery(n).val("squared"),"light"==p.scheme?(e(u).wpColorPicker("color","#59CFEB"),e(d).wpColorPicker("color","000000"),e(a).wpColorPicker("color","000000"),e(c).wpColorPicker("color","FFFFFF"),e(s).wpColorPicker("color","545454"),e(_).wpColorPicker("color","234C7A")):(e(u).wpColorPicker("color","84B03D"),e(d).wpColorPicker("color","000000"),e(a).wpColorPicker("color","FFFFFF"),e(c).wpColorPicker("color","313131"),e(s).wpColorPicker("color","EDEDED"),e(_).wpColorPicker("color","4496EA"))}}),jQuery("select.flexmls_connect__listing_source").live("change",function(){var e=jQuery(this).parent().parent();"location"===jQuery(this).val()?(jQuery(".flexmls_connect__location, .flexmls_connect__location_property_type_p",e).show(),jQuery(".flexmls_connect__no_filters_applied",e).hide(),jQuery(".flexmls_connect__roster",e).hide()):"agent"===jQuery(this).val()?(jQuery(".flexmls_connect__roster",e).show(),jQuery(".flexmls_connect__location, .flexmls_connect__location_property_type_p",e).hide()):(jQuery(".flexmls_connect__location, .flexmls_connect__location_property_type_p",e).hide(),jQuery(".flexmls_connect__no_filters_applied",e).show(),jQuery(".flexmls_connect__roster",e).hide())}),jQuery("select.flexmls_connect__setting_enabler_property_type_enabled").live("change",function(){var e=jQuery(this).parent().parent().parent();"on"===jQuery(this).val()?jQuery(".flexmls_connect__disable_group_property_type_enabled",e).show():jQuery(".flexmls_connect__disable_group_property_type_enabled",e).hide()}),jQuery("select.flexmls_connect__setting_enabler_detailed_search").live("change",function(){var e=jQuery(this).parent().parent().parent();"on"===jQuery(this).val()?jQuery(".flexmls_connect__disable_group_detailed_search",e).show():jQuery(".flexmls_connect__disable_group_detailed_search",e).hide()}),jQuery("ul.flexmls_connect__sortable li span.remove").live("click",function(){var e=jQuery(this).parent().parent().parent();jQuery(this).parent().remove(),flexmls_connect.build_sortable_hidden_input(jQuery("ul.flexmls_connect__sortable",e))}),jQuery("button.flexmls_connect__add_std_field, button.flexmls_connect__add_property_type").live("click",function(){var e=jQuery(this).parent(),l=jQuery("select.flexmls_connect__available option:selected",e),t='<span class="remove" title="Remove this">&times;</span><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>';return 0==jQuery("ul.flexmls_connect__sortable li[data-connect-name='"+l.val()+"']",e).length&&jQuery("<li>"+t+l.text()+"</li>").attr("data-connect-name",l.val()).appendTo(jQuery("ul.flexmls_connect__sortable",e)),flexmls_connect.build_sortable_hidden_input(jQuery("ul.flexmls_connect__sortable",e)),!1}),jQuery(".photos_display").live("change",function(){"all"!=this.value?jQuery(".photos_days").show():jQuery(".photos_days").hide()})}),flexmls_connect.location_setup=function(e){widget=jQuery(e).parent(),search_input=jQuery(".flexmls_connect__location_search",widget),search_input.addClass("loaded");var l=jQuery(".flexmls_connect__location_list",widget),t=jQuery("input.flexmls_connect__tech_id",widget).val(),r=jQuery("input.flexmls_connect__ma_tech_id",widget).val(),i=search_input.attr("data-connect-url"),o=[jQuery(".flexmls_connect__property_type option:selected",widget).val()],n="true"!=l.attr("data-connect-multiple"),c=jQuery("input.flexmls_connect__location_fields",widget),a=l.locationlist({base_url:i,standardFields:!0,tech_id:t,mls:[r],propertyType:o,operatorAccess:!1,backgroundColor:"ffffff",animation:!1,defaultText:"All Locations Included",beforeCreateCallback:function(e){return n&&a.destroyAll(),!0},createCallback:function(e){flexmls_connect.location_change(a,c),n&&(jQuery("input.flexmls_connect__location_search",widget).trigger("collapse"),jQuery("a.flexmls_connect__location_browse",widget).trigger("collapse"))},updateCallback:function(e){flexmls_connect.location_change(a,c)},deleteCallback:function(e){flexmls_connect.location_change(a,c)}}),s={base_url:i,tech_id:t,list:a,mls:[r],propertyType:o,standardFields:!0,fieldAccess:!0,overlayAccess:!0,include:["City","StateOrProvince","SteetAddress","PostalCode","CountyOrParish","SubdivisionName","MLSAreaMajor","ListingId","SchoolDistrict"],default_value:"City, Postal Code, etc.",orientation:"right",ajaxDataLimit:8,structure:"<div class='title'>&nbsp;</div><img src='https://www.flexmls.com/images/srch_rs/loading.gif' class='loading' /><img src='https://www.flexmls.com/images/mapping/bubble/close_13.png' title='close bubble' class='close' /><span class='fieldsContainer'><table cellpadding='0' cellspacing='0' border='0'></table><table cellpadding='0' cellspacing='0' border='0'></table><table cellpadding='0' cellspacing='0' border='0'></table></span>"};if(search_input.locationsearch(s),jQuery("a.flexmls_connect__location_browse",widget).length>0&&(s.structure="<div class='title'>&nbsp;</div><img src='https://www.flexmls.com/images/srch_rs/loading.gif' class='loading' /><img src='https://www.flexmls.com/images/mapping/bubble/close_13.png' title='close bubble' class='close' /><table cellpadding='0' cellspacing='0' border='0' class='categories'></table><span class='fieldsContainer'><table cellpadding='0' cellspacing='0' border='0' class='fields'></table></span>",jQuery("a.flexmls_connect__location_browse",widget).locationbrowse(s)),""!=c.val()){for(var _=[],u=c.val().split("|"),d=0;d<u.length;d++){var p=[u[d].substring(0,u[d].indexOf("=")),u[d].substring(u[d].indexOf("=")+1)];_.push({name:p[0],value:p[1].substring(0,p[1].indexOf("&"))})}a.create(_)}},flexmls_connect.location_change=function(e,l){for(var t="",r=e.compile(!0),i=0;i<r.length;i++){var o=r[i].value;"SubdivisionName"==r[i].name&&("'"!=o[0]&&"'"!=o[o.length-1]||(o=o.substr(1),o=o.slice(0,-1)),o+="*"),t+=(""==t?"":"|")+r[i].name+"="+o+"&"+r[i].display_val}l.val(t)},flexmls_connect.sortable_setup=function(e){widget=jQuery(e).parent(),jQuery("ul.flexmls_connect__sortable",widget).each(function(l,t){try{jQuery(t).addClass("loaded").sortable({stop:function(e,l){flexmls_connect.build_sortable_hidden_input(jQuery(this))}}),jQuery(t).disableSelection()}catch(l){setTimeout(function(){flexmls_connect.sortable_setup(e)},1e3)}})},flexmls_connect.build_sortable_hidden_input=function(e){var l=jQuery(e).parent(),t="";jQuery("li",jQuery(e)).each(function(e,l){var r=jQuery(l).attr("data-connect-name");r&&(t+=""==t?r:","+r)}),jQuery("input.flexmls_connect__list_values",l).val(t)};
!function(e){e.fn.extend({locationsearch:function(a){return this.each(function(){new e.Location.Searcher(this,a)})},locationbrowse:function(a){return this.each(function(){new e.Location.Browser(this,a)})},locationlist:function(a){return e.Location.Lister(this,a)}}),e.Location=function(){},e.Location.Searcher=function(a,t){function i(a,t,i,l){var p=0;if(""==t&&(c=e.extend(!0,{},a)),l||""==t||r.put(t+"|"+(i?"all":"limit"),a),s.val()==t){if(e("div#"+d.id+" img.loading").hide(),e("div.headline, div.dontknow, table tr, a.showall","div#"+d.id).remove(),!a||0==a.success)return n.errorMessage(a.message),n.ensureVisible(),void(navigator.userAgent.match("MSIE 6")&&n.adjustShim());if(!(a.results&&0!=a.results.length||a.overlays&&0!=a.overlays.length)){if(""!=t)return n.errorMessage(),n.ensureVisible(),void(navigator.userAgent.match("MSIE 6")&&n.adjustShim());if(!d.overlayAccess||!d.privateAccess)return e("<div>").addClass("dontknow").html("<h3>MLS # and Street Address Search</h3><p>To begin, simply type in the input box to the left.</p>").insertAfter("div#"+d.id+" div.title"),n.ensureVisible(),void(navigator.userAgent.match("MSIE 6")&&n.adjustShim())}if(a.top_result&&n.changeField(e("<tr>").html("<td class='first'>Top Hit</td><td>"+a.top_result.display_val+"&nbsp; ("+o.fieldLabel(a.top_result).toLowerCase()+")</td>").data("srchObj",a.top_result).attr("title","Double Click or hit Enter to Add to Search").appendTo("div#"+d.id+" table:first")),a.results&&a.results.length>0){p+=a.results.length,e("div#"+d.id+" table:odd").show(),e("<div>").addClass("headline").html("MLS Fields <span>double click or hit Enter to add to search</span>").insertAfter("div#"+d.id+" table:first");var h="";e.each(a.results,function(a,t){var i=o.fieldLabel(t);e("<tr>").html("<td class='first'>"+(i==h?"&nbsp;":i)+"</td><td>"+t.display_val+"</td>").data("srchObj",t).attr("title","Double Click or hit Enter to Add to Search").appendTo("div#"+d.id+" table:odd"),h=i})}else e("div#"+d.id+" table:odd").hide();if(a.overlays&&a.overlays.length>0){p+=a.overlays.length,e("<div>").addClass("headline").html("My Map Overlays <span>double click or hit Enter to add to search</span>").insertBefore("div#"+d.id+" table:last");var h="";e.each(a.overlays,function(a,t){var i=o.fieldLabel(t);e("<tr>").html("<td class='first'>"+(i==h?"&nbsp;":i)+"</td><td>"+t.display_val+"</td>").data("srchObj",t).attr("title","Double Click or hit Enter to Add to Search").appendTo("div#"+d.id+" table:last"),h=i})}else if(a.overlays&&0==a.overlays.length&&d.overlayAccess&&d.privateAccess&&""==t){e("<div>").addClass("headline").text("My Map Overlays").insertBefore("div#"+d.id+" table:last");var u="<p>Draw shapes on the map and re-use them in other searches with <a href='/cgi-bin/mainmenu.cgi?cmd=srv+mapping/overlays/index.html' title='My Map Overlays'>My Map Overlays</a>. Create collections of shapes that represent locations like neighborhoods or school districts, making searching easier for you and your <a href='/cgi-bin/mainmenu.cgi?cmd=url+preferences/portal/index.html' title='Portal Preferences'>portal</a> ";u+=d.idxAdvertising?"and <a href='/cgi-bin/mainmenu.cgi?cmd=url+idx/index.html' title='flexmls IDX Store'>flexmls IDX</a> visitors.</p>":"and flexmls IDX visitors.</p>",e("<div>").addClass("smaller").addClass("dontknow").html(u).insertBefore("div#"+d.id+" table:last")}var m=0;if(e("div#"+d.id+" table tr td.first").each(function(a,t){var i=parseInt(e(t).width());i>m&&(m=i)}),m+=10,e("div#"+d.id+" table tr td:last-child").width(425-m),e("div#"+d.id+" table tr td.first").width(m),p<=d.dataDisplayLimit){var f=0;e.each(e("table, div","div#"+d.id),function(a,t){f+=e(t).height()+10}),e("div#"+d.id+" span.fieldsContainer").height(f)}else e("div#"+d.id+" span.fieldsContainer").height(25*d.dataDisplayLimit);e("div#"+d.id+" a.showall").remove(),""!=t&&a.total>p&&e("<a>").attr("title","Click here to see all these locations").addClass("showall").html("Show All ("+n.addCommas(a.total)+")").css("margin-left",m+28).click(function(){s.trigger("search",[null,!0])}).appendTo("div#"+d.id),n.ensureVisible(),navigator.userAgent.match("MSIE 6")&&n.adjustShim()}}var s=e(a),l={base_url:"",mls:[],propertyType:[],id:"uloc"+Math.floor(1e11*Math.random()),bubbleClass:"uloc_search",include:[],exclude:[],ajaxDataLimit:18,dataDisplayLimit:18,standardFields:!1,privateAccess:!1,fieldAccess:!0,overlayAccess:!0,idxAdvertising:!1,default_value:"Location, address or MLS #",structure:"<div class='title'>&nbsp;</div><img src='/images/srch_rs/loading.gif' class='loading' /><img src='/images/mapping/bubble/close_13.png' title='close bubble' class='close' /><span class='fieldsContainer'><table cellpadding='0' cellspacing='0' border='0'></table><table cellpadding='0' cellspacing='0' border='0'></table><table cellpadding='0' cellspacing='0' border='0'></table></span>"},d=e.extend(l,t);if(!d.tech_id)throw"LOCATION SEARCH: You must include the tech_id of the current user";if(!e.isArray(d.mls)||0===d.mls.length)throw"LOCATION SEARCH: You must include the MLS you wish to search";if(!e.isArray(d.propertyType)||0===d.propertyType.length)throw"LOCATION SEARCH: You must include the property types you wish to search";var n=e.Location.Bubble(s,s,d),r=new e.Location.Cacher(d.mls,d.propertyType,d.standardFields,d.privateAccess),o=new e.Location.Utilities(d.standardFields),c=null,p=null;s.val(d.default_value).attr("autocomplete","off").css("color","#999").bind("initiate",function(){p=null,s.val("").css("color","#000").trigger("search",[!0])}).bind("hide",function(){s.val("").css("color","#999").val(d.default_value)}).bind("collapse",function(){n.setForceClose(),s.trigger("blur")}).bind("clickrow",function(e,a,t,i){n.changeField(a,t,i)}).bind("dblclickrow",function(a,t){n.returnResults(e("div#"+d.id+" table tr.selected"),"dblclick")}).bind("changePropertyType",function(e,a,t){d.mls==a&&d.propertyType==t||(d.mls=a,d.propertyType=t,r.updateSalt(a,t,d.privateAccess),c=null,n.changePropertyType(d.mls,d.propertyType))}).bind("search",function(a,t,l){var n=t?"":s.val();if(n!=p||l){if(p=n,""==n&&c)return void i(c,"");var o=r.fetch(n+"|"+(l?"all":"limit"));if(o)return void(e("div#"+d.id).length>0&&i(o,n,l,!0));e("div.headline, div.dontknow, table tr","div#"+d.id).remove(),e("div#"+d.id+" img.loading").show();var h=["/cgi-bin/mainmenu.cgi?cmd=srv+api/search/getLocations.json&command_line_mode=true&callback=?"];h.push("tech_id="+xId(d.tech_id)),h.push("ma="+d.mls.join(",")),h.push("p="+d.propertyType.join(",")),""!=n&&h.push("c=Y"),l||h.push("l="+d.ajaxDataLimit),l&&h.push("s=field_name,description"),h.push("q="+n),d.include.length>0&&h.push("i="+d.include.join(",")),d.exclude.length>0&&h.push("e="+d.exclude.join(",")),d.standardFields&&h.push("std=Y"),d.privateAccess&&h.push("a=a"),d.fieldAccess||h.push("d=e"),d.overlayAccess||h.push("o=p"),e.getJSON(d.base_url+h.join("&"),function(a){e("div#"+d.id).length>0&&i(a,n,l)})}})},e.Location.Browser=function(a,t){function i(a){return e("div#"+r.id+" img.loading").hide(),p=a,a&&0!=a.length?(e("table.categories, span.fieldsContainer","div#"+r.id).show(),e.each(a,function(a,t){var i=e("<tr>").html("<td>"+(r.privateAccess?t.display_val:t.idx_display_val)+"</td>").appendTo("div#"+r.id+" table.categories");r.standardFields?(i.data("standard_field_name",t.standard_field_name),"MapOverlay"==t.standard_field_name&&i.data("standard_field_value",t.standard_field_value)):i.data("table_name",t.table_name).data("field_id",t.field_id),0==a&&(i.addClass("selected"),d.trigger("findLocations"))}),u=h-e("div#"+r.id+" table.categories").width(),void e("div#"+r.id+" span.fieldsContainer table.fields").width(u)):(e("table.categories, span.fieldsContainer","div#"+r.id).hide(),void o.errorMessage())}function s(a,t){t&&c.put(t,a),e("div#"+r.id+" img.loading").hide(),e("div#"+r.id+" span.fieldsContainer table.fields tr").remove();var i=a.overlays&&a.overlays.length>0?a.overlays:a.results;e.each(i,function(a,t){e("<tr>").html("<td width='"+u+"'>"+t.display_val+"</td>").data("srchObj",t).attr("title","Double Click or hit Enter to Add to Search").appendTo("div#"+r.id+" span.fieldsContainer table.fields")}),e("div#"+r.id+" span.fieldsContainer").height(i.length<=r.dataDisplayLimit?e("div#"+r.id+" span.fieldsContainer table").height()+5:20*r.dataDisplayLimit),e("div#"+r.id+" a.showall").remove(),a.total>i.length&&e("<a>").attr("title","Click here to see all these locations").addClass("showall").html("Show All ("+o.addCommas(a.total)+")").css("margin-left",e("div#"+r.id+" span.fieldsContainer").position().left).click(function(){d.trigger("findLocations",!0)}).insertAfter("div#"+r.id+" span.fieldsContainer"),o.ensureVisible(),navigator.userAgent.match("MSIE 6")&&o.adjustShim()}var l=e(a),d=e("<input>").attr("size","1").css({width:"1",height:"1",position:"absolute",left:-5e4}).insertAfter(l),n={base_url:"",mls:[],propertyType:[],id:"uloc"+Math.floor(1e11*Math.random()),bubbleClass:"uloc_browse",include:[],exclude:[],standardFields:!1,privateAccess:!1,fieldAccess:!0,overlayAccess:!0,idxAdvertising:!1,structure:"<div class='title'>&nbsp;</div><img src='/images/srch_rs/loading.gif' class='loading' /><img src='/images/mapping/bubble/close_13.png' title='close bubble' class='close' /><table cellpadding='0' cellspacing='0' border='0' class='categories'></table><span class='fieldsContainer'><table cellpadding='0' cellspacing='0' border='0' class='fields'></table></span>",ajaxDataLimit:150,dataDisplayLimit:18},r=e.extend(n,t);if(!r.tech_id)throw"LOCATION BROWSE: You must include the tech_id of the current user";if(!e.isArray(r.mls)||0===r.mls.length)throw"LOCATION BROWSE: You must include the MLS you wish to search";if(!e.isArray(r.propertyType)||0===r.propertyType.length)throw"LOCATION BROWSE: You must include the property types you wish to search";var o=e.Location.Bubble(d,l,r),c=new e.Location.Cacher(r.mls,r.propertyType,r.standardFields,r.privateAccess),p=(new e.Location.Utilities(r.standardFields),null),h=navigator.userAgent.match("MSIE")?422:424,u=null;l.attr("title","Click here to browse through available search locations").click(function(e){e.stopPropagation(),o.preventBlur(),d.trigger("focus")}).dblclick(function(e){e.stopPropagation(),o.preventBlur(),d.trigger("focus")}).bind("collapse",function(){o.setForceClose(),d.trigger("blur")}).bind("changePropertyType",function(e,a,t){r.mls.join("")==a.join("")&&r.propertyType.join("")==t.join("")||(r.mls=a,r.propertyType=t,c.updateSalt(a,t,r.privateAccess),p=null)}),d.bind("initiate",function(){d.trigger("browse")}).bind("browse",function(){if(e("div.dontknow","div#"+r.id).remove(),p)i(p);else{e("div#"+r.id+" img.loading").show();var a=["/cgi-bin/mainmenu.cgi?cmd=srv+api/search/getLocationFields.json&command_line_mode=true&callback=?&et=T"];a.push("tech_id="+xId(r.tech_id)),a.push("m="+r.mls.join(",")),a.push("p="+r.propertyType.join(",")),r.standardFields&&a.push("std=Y"),r.privateAccess&&a.push("a=a"),r.fieldAccess||a.push("d=e"),r.overlayAccess||a.push("o=p"),r.include.length>0&&a.push("i="+r.include.join(",")),r.exclude.length>0&&a.push("e="+r.exclude.join(",")),e.getJSON(r.base_url+a.join("&"),function(a){e("div#"+r.id).length>0&&i(a)})}}).bind("findLocations",function(a,t){e("div#"+r.id+" a.showall").remove(),t||e("div#"+r.id+" span.fieldsContainer table.fields tr").remove(),e("div#"+r.id+" img.loading").show();var i=e(e("div#"+r.id+" table.categories tr.selected_category").length>0?"div#"+r.id+" table.categories tr.selected_category":"div#"+r.id+" table.categories tr.selected"),l=r.standardFields?i.data("standard_field_name"):i.data("table_name")+i.data("field_id");l+=t?"all":"limit";var d=c.fetch(l);if(d)return void(e("div#"+r.id).length>0&&setTimeout(function(){s(d)},10));var n=["/cgi-bin/mainmenu.cgi?cmd=srv+api/search/getLocations.json&command_line_mode=true&c=Y&s=description&callback=?"];n.push("tech_id="+xId(r.tech_id)),n.push("ma="+r.mls.join(",")),n.push("p="+r.propertyType.join(",")),r.standardFields?(n.push("std=Y"),n.push("name="+i.data("standard_field_name")),"MapOverlay"==i.data("standard_field_name")&&n.push("f="+i.data("standard_field_value"))):(n.push("tb="+i.data("table_name")),n.push("f="+i.data("field_id"))),t||n.push("l="+r.ajaxDataLimit),r.include.length>0&&n.push("i="+r.include.join(",")),r.exclude.length>0&&n.push("e="+r.exclude.join(",")),r.privateAccess&&n.push("a=a"),r.fieldAccess&&"overlays"!=i.data("table_name")&&"MapOverlay"!=i.data("standard_field_name")||n.push("d=e"),(!r.overlayAccess||"overlays"!=i.data("table_name")&&"MapOverlay"!=i.data("standard_field_name"))&&n.push("o=p"),e.getJSON(r.base_url+n.join("&"),function(a){e("div#"+r.id).length>0&&s(a,l)})}).bind("clickrow",function(e,a,t,i){a.parent().parent().hasClass("categories")?o.changeCategory(a):o.changeField(a,t,i)}).bind("dblclickrow",function(a,t){t.parent().parent().hasClass("categories")||o.returnResults(e("div#"+r.id+" table.fields tr.selected"),"dblclick")})},e.Location.Bubble=function(a,t,i){function s(){I=!1;var a=-35,t=425;if("left"==L.orientation)var i=L.base_url+"/images/mapping/bubble/tips/right.png",s=(navigator.userAgent.match("MSIE"),0);else if("right"==L.orientation)var i=L.base_url+"/images/mapping/bubble/tips/left.png",s=14;else if("above"==L.orientation){var i=L.base_url+"/images/mapping/bubble/tips/bottom.png";a=-14;var s=(C.width()-t)/2}else if("below"==L.orientation){var i=L.base_url+"/images/mapping/bubble/tips/top.png";a=14;var s=(C.width()-t)/2}spotlight.show(C.context,{id:L.id,html:L.structure,width:t,backgroundColor:"#fff",borderColor:"#333",color:"#fff",close:!1,zIndex:999999998,orientation:L.orientation,left:s,top:a}),e("div#"+L.id).addClass(L.bubbleClass).css({padding:"0"}),navigator.userAgent.match("MSIE 6")&&e("div.title","div#"+L.id).css({filter:"","background-color":"#ddd"}),e("div#"+L.id+" img.close").click(function(e){e.stopImmediatePropagation(),clearTimeout(b),I=!0,_.trigger("blur")});var l=e("div#"+L.id).position();"left"==L.orientation?(l.left+=e("div#"+L.id).width()+1,l.top+=35):"right"==L.orientation?(l.left-=(navigator.userAgent.match("MSIE"),13),l.top+=35):"above"==L.orientation?(l.left+=t/2,l.bottom=parseInt(e("div#"+L.id).css("bottom"))-13):"below"==L.orientation&&(l.left+=t/2,l.top-=13),k=e("<img>").attr("src",i).css({"z-index":1999999999,position:"absolute",padding:0,left:l.left}),l.bottom?k.css("bottom",l.bottom):k.css("top",l.top),k.appendTo("body")}function l(){if("left"==L.orientation||"right"==L.orientation){var a=e("div#"+L.id),t=parseInt(a.position().top),i=parseInt(t+a.height()),s=parseInt(e(window).height())+parseInt(e(window).scrollTop());if(t<0)a.css("top","0");else if(i>s){var l=i-s+4;l>t&&(l=t),a.css("top",t-l)}else a.css("top",k.position().top-35)}}function d(){k&&k.remove(),spotlight.hide(L.id),_.trigger("hide")}function n(){I=!0}function r(){I||(clearTimeout(b),_.trigger("focus"))}function o(){var a=e("div#"+L.id);e("iframe#"+L.id+"_shim").css({width:a.width(),height:a.height()})}function c(a){if(a)var t="<h3>An Error Occurred</h3><p>Sorry, an error has occurred with your request</p><p>"+a+"</p>";else if(L.overlayAccess&&L.privateAccess){var t="<h3>My Map Overlays</h3><p><a href='/cgi-bin/mainmenu.cgi?cmd=srv+mapping/overlays/index.html' title='My Map Overlays'>Set up My Map Overlays</a><br/><br /></p><p>Draw shapes on the map and re-use them in other searches with <a href='/cgi-bin/mainmenu.cgi?cmd=srv+mapping/overlays/index.html' title='My Map Overlays'>My Map Overlays</a>. Create collections of shapes that represent locations like neighborhoods or school districts, making searching easier for you and your <a href='/cgi-bin/mainmenu.cgi?cmd=url+preferences/portal/index.html' title='Portal Preferences'>portal</a> ";t+=L.idxAdvertising?"and <a href='/cgi-bin/mainmenu.cgi?cmd=url+idx/index.html' title='flexmls IDX Store'>flexmls IDX</a> visitors.</p>":"and flexmls IDX visitors.</p>"}else if(L.fieldAccess)var t="<h3>No Locations Found</h3><p>Sorry, we were unable to find any locations that fit your search.</p><p>Please try entering a different search term.</p>";else var t="<h3>No Map Overlays Found</h3><p>Sorry, we were unable to find any overlays that fit your search.</p><p>Please try entering a different search term.</p>";e("<div>").addClass("dontknow").html(t).insertAfter("div#"+L.id+" div.title")}function p(e,a){L.list&&L.list.changePropertyType(e,a)}function h(a,t){var i=[];a.each(function(){var a=L.standardFields?e(this).data("srchObj").field_display_val:e(this).data("srchObj").d;if(a&&(i.push(e(this).data("srchObj")),!L.standardFields))try{loadOnDemand.execute(function(e,a,i,s,l,d){flexmls.Log({u:e.join(","),level:1,d:d,e:"Location",t:_==C?"Search":"Browse",l:a.join(",").substr(0,50),c:t,a:new String(i+"|"+s+"|"+l).substr(0,500)})},[L.mls,L.propertyType,e(this).data("srchObj").tb,e(this).data("srchObj").f,e(this).data("srchObj").c,e(this).data("srchObj").d],{dependencyAlias:"analytics"})}catch(e){}}),L.list&&L.list.create(i),L.callback&&L.callback.apply(document.body,[i])}function u(a){var t=e("div#"+L.id+" table tr.selected"),i=[];"left"==a&&t.parent().parent().hasClass("fields")?i=e("div#"+L.id+" table.categories tr.selected_category"):"right"==a&&t.parent().parent().hasClass("categories")?i=e("div#"+L.id+" span.fieldsContainer table.fields tr:first"):"up"!=a&&"down"!=a||(i="up"==a?t.prev():t.next(),"uloc_search"===L.bubbleClass&&0==i.length&&("up"==a?(i=e("tr:last",t.parent().parent().prev().prev()),0==i.length&&(i=e("tr:last",t.parent().parent().prev().prev().prev()))):(i=e("tr:first",t.parent().parent().next().next()),0==i.length&&(i=e("tr:first",t.parent().parent().next().next().next()))))),0!=i.length&&(i.parent().parent().hasClass("categories")?m(i):f(i))}function m(a){var t=e(e("div#"+L.id+" table.categories tr.selected_category").length>0?"div#"+L.id+" table.categories tr.selected_category":"div#"+L.id+" table.categories tr.selected");e("div#"+L.id+" table.categories tr.selected_category").removeClass("selected_category"),e("div#"+L.id+" table tr.selected").removeClass("selected"),a.addClass("selected"),L.standardFields?a.data("standard_field_name")!=t.data("standard_field_name")&&_.trigger("findLocations"):a.data("table_name")==t.data("table_name")&&a.data("field_id")==t.data("field_id")||_.trigger("findLocations")}function f(a,t,i){if(e("div#"+L.id+" table.categories tr.selected").addClass("selected_category").removeClass("selected"),i){var s=e("div#"+L.id+" table tr").index(e("div#"+L.id+" table tr.selected")),l=e("div#"+L.id+" table tr").index(a),d=Math.min(s,l),n=Math.max(s,l);e.each(e("div#"+L.id+" table tr"),function(a,t){a>=d&&a<=n?e(t).addClass("selected"):e(t).removeClass("selected")})}else t||e("div#"+L.id+" table tr.selected").removeClass("selected"),a.addClass("selected");v(a,e("div#"+L.id+" span.fieldsContainer"))}function v(e,a){if(e&&a&&e.length>0&&a.length>0){var t=e.position();t&&t.top&&(t.top<a.scrollTop()||t.top+e.height()>a.scrollTop()+a.height())&&a.scrollTop(e.position().top-100)}}function g(e){e+="",x=e.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1,$2");return x1+x2}var b,y,_=a,C=t,k=null,I=!1,w={id:"uloc"+Math.floor(1e11*Math.random()),bubbleClass:"",structure:"<div class='title'></div><img src='/images/srch_rs/loading.gif' class='loading' /><img src='/images/mapping/bubble/close_13.png' title='close bubble' class='close' /><div class='info' style='height:200px;'></div><table cellpadding='0' cellspacing='0' border='0'></table>",orientation:"right",ajaxWaitTime:300,privateAccess:!1,overlayAccess:!0,idxAdvertising:!1,selectMultiple:!0},L=e.extend(w,i);return _.bind(e.browser.opera?"keypress":"keydown",function(a){switch(a.keyCode){case 37:u("left");break;case 38:u("up");break;case 39:u("right");break;case 40:u("down");break;case 13:case 3:return h(e("div#"+L.id+" table tr.selected"),"enter"),!1;case 27:_!=C||""==_.val()?(I=!0,_.trigger("blur")):setTimeout(function(){_.val("").trigger("search")},10);break;case 9:break;default:_==C&&(y&&clearTimeout(y),y=setTimeout(function(){_.trigger("search")},L.ajaxWaitTime))}}).focus(function(){0==e("div#"+L.id).length&&(s(),_.trigger("initiate"))}).blur(function(){b=setTimeout(d,100)}).bind("paste",function(){_==C&&(y&&clearTimeout(y),y=setTimeout(function(){_.trigger("search")},L.ajaxWaitTime))}),e("div#"+L.id).live("click",function(){r()}).live("dblclick",function(){r()}).live("mousemove",function(){r()}).live("mousedown",function(){setTimeout(function(){r()},10)}),e("div#"+L.id+" table tr td").live("mouseover",function(){e(this).parent().addClass("over")}).live("mouseout",function(){e(this).parent().removeClass("over")}).live("click",function(a){r(),_.trigger("clickrow",[e(this).parent(),a.metaKey&&L.selectMultiple,a.shiftKey&&L.selectMultiple])}).live("dblclick",function(a){r(),a.stopImmediatePropagation(),_.trigger("dblclickrow",[e(this).parent()])}),{setForceClose:n,show:s,ensureVisible:l,hide:d,preventBlur:r,adjustShim:o,addCommas:g,errorMessage:c,changeCategory:m,changeField:f,changePropertyType:p,returnResults:h}},e.Location.Lister=function(a,t){function i(a,t){if(T.beforeCreateCallback&&!t){var d=T.beforeCreateCallback.apply(document.body,[a]);if(!d)return!1}var n=!1;""!=T.defaultText?e("p",w).remove():w.show(),e.each(a,function(a,d){if(T.debug&&console.debug(d),T.standardFields&&!d.display_type){if(!x(d)&&"UnparsedAddress"!==d.name){var c=["/cgi-bin/mainmenu.cgi?cmd=srv+api/search/getLocations.json&command_line_mode=true&a=a&callback=?"];return c.push("tech_id="+xId(T.tech_id)),c.push("ma="+T.mls.join(",")),c.push("p="+T.propertyType.join(",")),c.push("std=Y"),c.push("name="+d.name),c.push("v="+d.value),void e.getJSON(T.base_url+c.join("&"),function(e){e.success&&e.top_result&&i([e.top_result],t)})}d.display_type="T","UnparsedAddress"===d.name&&(d.display_val=d.value)}var p=u(d);e.each(p,function(a,t){T.debug&&console.debug(d);var i=C(t);if(!i){n=!0;var c=b(t),p=null,u=!1,g=!1,I=!1;if(e("span."+c.class_name,w).length>0){p=e("div."+c.class_name+":last",w);var g=e("span."+c.class_name,w).hasClass("not"),I=e("span."+c.class_name,w).hasClass("ignored");x(t)&&"exclusively of"!=e("span."+c.class_name+" a",w).text()&&(T.standardFields||(t.r=I?"X":"O",d.r=t.r))}else{u=h(t,t.r);var L=e("<span>").html(c.display_val).addClass(c.class_name).addClass("category");0==e("span.category",w).length&&L.css("border","0"),k(t)&&L.addClass("isShape");var S=T.standardFields?o(L.hasClass("isShape"),!0,!1,u,!0):o(L.hasClass("isShape"),"X"!=t.r,t.o.indexOf("intersection")!=-1,u,!0);T.standardFields||"X"!=t.r||L.addClass("not"),!u&&w.hasClass("ignored")?(L.addClass("ignored"),I=!0):u&&(e("span",w).addClass("ignored"),e("div.location",w).addClass("ignored"),w.addClass("ignored")),g=L.hasClass("not"),L.appendTo(w);var O=T.privateAccess||"exclusively of"!=S.text?"":"none";T.operatorAccess&&e("<a>").text(S.text).css("display",O).attr("title",S.title).click(function(){r(e(this))}).appendTo(L),p=L}if(!t.shapeId&&T.mapDocument&&t.coords&&(t.shapeId=Math.floor(1e12*Math.random())),i=e("<div>").data("srchObj",t).addClass(c.class_name).addClass("location"),g&&i.addClass("not"),I&&i.addClass("ignored"),p?p.after(i):i.appendTo(w),"db2poly"==t.f&&null==t.c)i.html("<span><img src='"+T.base_url+"/images/srch_rs/loading.gif' class='db2polyloading' align='absmiddle' /> rendering "+t.display_val+"</span>");else if(T.mapDocument&&t.coords)_(i,t),e("<a>").attr("title","zoom to this shape on the map").addClass("mapLink").text(t.display_val).click(function(){T.mapDocument.myFBSMapLoaded&&T.mapDocument.centerOnShape.apply(document.body,[t.shapeId])}).prependTo(i),y(t).prependTo(i),T.mapDocument.myFBSMapLoaded&&!T.mapDocument.findShapeById(t.shapeId)&&(k(t)?T.mapDocument.addPolygon(t.coords,t.shapeId,t.display_val,t.color):T.mapDocument.addDashedPolygon(t.coords,t.shapeId,t.display_val));else if("T"==t.display_type||x(t)||"combo"==t.display_type&&"like"==t.o){if(x(t))if(T.datashareInformation.length>1){var j=m(t.g);j&&(e("<a>").attr("title",j.name+", click to change").addClass("textLink").text(j.abbr.toUpperCase()).click(function(){v(this,i)}).prependTo(i),e("<span>").text("within").prependTo(i))}else 0==T.datashareInformation.length&&e.getJSON(T.base_url+"/cgi-bin/mainmenu.cgi?cmd=srv+srch/getMLSs.html&command_line_mode=true&callback=?&ma_tech_id="+T.mls[0],function(a){if(T.datashareInformation=a,T.datashareInformation.length>1){var s=m(t.g);s&&(e("<span>").text("within").appendTo(i),e("<a>").attr("title",s.name+", click to change").addClass("textLink").text(s.abbr.toUpperCase()).click(function(){v(this,i)}).appendTo(i))}});e("<a>").attr("title","edit this location").addClass("textLink").text(t.display_val).click(function(){f(this,i)}).prependTo(i)}else{var M="<span>"+t.display_val+"</span>";if(!t.coords&&T.mapDocument&&T.mapDocument.myFBSMapLoaded){M="<img src='"+T.base_url+"/images/srch_rs/loading.gif' class='polyloading' align='absmiddle' /> "+M;var A=["/cgi-bin/mainmenu.cgi?cmd=srv+api/search/getLocationPolygon.json&command_line_mode=true&a=a&callback=?"];A.push("tech_id="+xId(T.tech_id)),A.push("ma="+T.mls.join(",")),A.push("p="+T.propertyType.join(",")),T.standardFields?(A.push("std=Y"),A.push("name="+t.name),A.push("v="+t.value)):(A.push("tb="+t.tb),A.push("f="+t.f),A.push("v="+t.c)),e.getJSON(T.base_url+A.join("&"),function(a){a.success&&a.coords&&(t.shapeId=Math.floor(1e12*Math.random()),T.mapDocument.myFBSMapLoaded&&("overlays"==a.tb?T.mapDocument.addPolygon(a.coords[0],t.shapeId,t.display_val,t.color):T.mapDocument.addDashedPolygon(a.coords,t.shapeId,t.display_val))),e("img.polyloading",i).remove()})}if(!t.display_val){M="<img src='"+T.base_url+"/images/srch_rs/loading.gif' class='polyloading' align='absmiddle' /><span>rendering...</span>";var A=["/cgi-bin/mainmenu.cgi?cmd=srv+api/search/getLocations.json&command_line_mode=true&a=a&callback=?"];A.push("tech_id="+xId(T.tech_id)),A.push("ma="+T.mls.join(",")),A.push("p="+T.propertyType.join(",")),T.standardFields?(A.push("std=Y"),A.push("name="+t.name),A.push("v="+t.value)):(A.push("tb="+t.tb),A.push("f="+t.f),A.push("v="+t.c)),e.getJSON(T.base_url+A.join("&"),function(a){a.success&&a.top_result&&a.top_result.display_val?(s(i,a.top_result,!1),e("span",i).html(a.top_result.display_val)):a.success&&l(i),e("img.polyloading",i).remove()})}i.html(M)}"db2poly"==t.f&&null==t.c||e("<a>").attr("title","remove this location").html("&times;").addClass("del").click(function(){l(e(this).parent())}).prependTo(i)}T.animation&&i.stop(!0,!0).css("backgroundColor",T.animationColor).animate({backgroundColor:T.backgroundColor},2e3).delay(2100).css("backgroundColor",T.backgroundColor)})}),n&&T.createCallback&&!t&&T.createCallback.apply(document.body,[a])}function s(a,t,i){if(T.beforeUpdateCallback&&!i){var s=T.beforeUpdateCallback.apply(document.body,[t]);if(!s)return!1}var d=e.extend(!0,{},e(a).data("srchObj"));if(t.id&&(d.id=t.id),I(d)&&T.mapDocument&&(t.color&&d.color&&d.color!=t.color||t.label&&d.label&&d.label!=t.label||t.coords&&d.coords&&d.coords!=t.coords)){l(a);for(var n=[],r=t.coords.split(";"),o=0;o<r.length;o++)singleNode=r[o].split(","),n.push([singleNode[0]/T.mapDocument.latLonDivisor,singleNode[1]/T.mapDocument.latLonDivisor]);var c=T.mapDocument.myFBSMap.addPolygon(n,{strokeColor:"#"+d.color,dash:[5,2],fillColor:"#"+d.color,fillOpacity:.15,strokeLinecap:"round",strokeWidth:2,pointRadius:3},{canvas:T.mapDocument.myFBSMap.initialFeatureCanvasLayer});return c.uid=Math.floor(1e12*Math.random()),void T.mapDocument.myFeatureListener(c,d.display_val,d.color)}if(t.label&&(T.mapDocument&&d.coords?e("a:last",e(a)).text(t.label):e("span",e(a)).text(t.label),d.display_val=t.label),t.color&&(e("div.color",e(a)).css("backgroundColor",t.color),d.color=t.color),"mapshape"==d.tb&&(d.d=d.color+"|"+d.display_val),t.c_tech_id&&"db2poly"==d.f&&(d.c=t.c_tech_id,e("img.db2polyloading",e(a)).length>0&&(T.mapDocument&&d.coords?(e(a).html(""),_(e(a),d),e("<a>").attr("title","zoom to this shape on the map").addClass("mapLink").text(d.display_val).click(function(){T.mapDocument.myFBSMapLoaded&&T.mapDocument.centerOnShape.apply(document.body,[d.shapeId])}).prependTo(e(a)),y(d).prependTo(e(a)),T.mapDocument.myFBSMapLoaded&&!T.mapDocument.findShapeById(d.shapeId)&&T.mapDocument.addDashedPolygon(d.coords,d.shapeId,d.display_val),e("<a>").attr("title","remove this location").html("&times;").addClass("del").click(function(){l(e(this).parent())}).prependTo(e(a))):e(a).html("<span>"+obj.display_val+"</span>"))),t.coords&&("mapshape"==d.tb&&"db2poly"!=d.f&&(d.c=t.coords),null==d.coords&&(e("span, a.textLink",a).remove(),e("a.del",a).after(y(d)),e("div.color",a).after(e("<a>").attr("title","zoom to this shape on the map").addClass("mapLink").text(d.display_val).click(function(){T.mapDocument.myFBSMapLoaded&&T.mapDocument.centerOnShape.apply(document.body,[d.shapeId])})),_(e(a),d))),T.standardFields&&t.field_display_val){var p=b(t);0==e("span."+p.class_name,w).length&&e("span."+t.name,w).text(p.display_val).removeClass(t.name).addClass(p.class_name),e(a).hasClass(t.name)&&e(a).removeClass(t.name).addClass(p.class_name)}e(a).data("srchObj",e.extend(d,t)),T.updateCallback&&!i&&T.updateCallback.apply(document.body,[[t]])}function l(a){var t=[e(a).data("srchObj")];if(T.beforeDeleteCallback){var i=T.beforeDeleteCallback.apply(document.body,[t]);if(!i)return!1}if(0!=e(a).length&&!e(a).data("destroy")){if(e(a).data("destroy","true"),w.hasClass("ignored")&&!e(a).hasClass("ignored")&&h(e(a).data("srchObj"),e(a).data("srchObj").r)){var s="";e("span.category",w).each(function(t,i){if("exclusively of"==e("a",e(i)).text()){var l=e(i).attr("class").split(" ")[0];(!e(a).hasClass(l)||e("span."+l+", div."+l,w).length>2)&&(s=l)}}),""!=s?e("span."+s+", div."+s,w).removeClass("ignored"):(e("span, div.location",w).removeClass("ignored"),w.removeClass("ignored"))}e(a).slideUp("fast",function(){var i=b(e(a).data("srchObj")),s=e(a).data("srchObj").shapeId;1==e("div."+i.class_name,w).length&&(e("span."+i.class_name,w).remove(),e("span.category:first",w).css("border","0")),e(a).remove(),T.mapDocument&&T.mapDocument.myFBSMapLoaded&&T.mapDocument.removeFeature(s),0==e("div.location",w).length&&(""!=T.defaultText?e("<p>").text(T.defaultText).prependTo(w):w.hide()),T.deleteCallback&&T.deleteCallback.apply(document.body,[t])})}}function d(){if(T.deleteCallback||T.mapDocument){var a=[];e("div.location",w).each(function(t,i){a.push(e(i).data("srchObj"))})}if(T.beforeDeleteCallback){var t=T.beforeDeleteCallback.apply(document.body,[a]);if(!t)return!1}e("div.location",w).remove(),e("span",w).remove(),w.removeClass("ignored"),0==e("p",w).length&&(""!=T.defaultText?e("<p>").text(T.defaultText).prependTo(w):w.hide()),T.mapDocument&&T.mapDocument.myFBSMapLoaded&&T.mapDocument.removeAllFeatures(),T.deleteCallback&&T.deleteCallback.apply(document.body,[a])}function n(a,t){T.mls=a,T.propertyType=t;var i=c(!0);if(i&&i.length>0){var s=["/cgi-bin/mainmenu.cgi?cmd=srv+api/search/validateLocations.json&command_line_mode=true&callback=?"];s.push("ma="+a.join(",")),s.push("p="+t.join(",")),s.push("cnt="+i.length),T.standardFields&&s.push("std=Y");for(var d=0;d<i.length;d++)T.standardFields?(s.push("name"+(d+1)+"="+i[d].name),s.push("value"+(d+1)+"="+encodeURIComponent(i[d].value))):(s.push("tb"+(d+1)+"="+i[d].tb),s.push("f"+(d+1)+"="+i[d].f),s.push("c"+(d+1)+"="+encodeURIComponent(i[d].c)),s.push("d"+(d+1)+"="+encodeURIComponent(i[d].d))),s.push("id"+(d+1)+"="+d);e.getJSON(T.base_url+s.join("&"),function(e){if(e.locations&&e.locations.length>0)for(var a=0;a<e.locations.length;a++)l(i[e.locations[a]].div)})}}function r(a){var t=a.parent().attr("class").split(" ")[0],i=a.parent().hasClass("isShape"),s=!a.text().match("not"),l="intersection"==a.text(),d=a.text().match("exclusively of"),n=a.parent().hasClass("uloc_Street_Address")||a.parent().hasClass("uloc_MLS___List"),r=o(i,s,l,n,d,!0);if(a.attr("title",r.title).text(r.text),i&&s&&!l||d||e("span."+t+", div."+t,w).toggleClass("not"),n)if("exclusively of"==r.text){e("span, div.location",w).addClass("ignored"),
w.addClass("ignored");var c=a.parent().attr("class").split(" ")[0];e("span."+c+", div.location."+c+", div.location."+c+" span",w).removeClass("ignored")}else"of"==r.text&&(e("span, div.location",w).removeClass("ignored"),w.removeClass("ignored"));if(T.updateCallback){var p=[];e("div."+t,w).each(function(a,t){var i=e(t).data("srchObj");i.r=r.r,p.push(i)}),T.updateCallback.apply(document.body,[p])}}function o(e,a,t,i,s,l){return l&&(e?a&&!t?t=!0:a&&t?(a=!1,t=!1):a=!0:i?s?(s=!1,a=!0):a?(a=!1,s=!1):(a=!0,s=!0):a=!a),e?a&&!t?{text:"within",title:"all shape locations are included, click to intersect",r:"R"}:a&&t?{text:"intersection",title:"all shape locations must be matched, click to exclude",r:"R"}:{text:"not within",title:"no shape locations are included, click to include",r:"X"}:i?s?{text:"exclusively of",title:"only this location is searched, click to include other search items",r:"R"}:a?{text:"of",title:"all locations must be matched, click to exclude",r:"O"}:{text:"not of",title:"excluding this location, click to include",r:"X"}:{text:a?"of":"not of",title:a?"these locations are included, click to exclude":"these locations are excluded, click to include",r:a?"R":"X"}}function c(a){var t={exclusives:[],regulars:[]},i="R",s="within",l=new RegExp(/^([^\s]*)( where ma_tech_id=x'\d{26}')/);if(e("div.location, span.category",w).each(function(d,n){if(e(n).hasClass("location")){var r=e(n).data("srchObj");if(!T.standardFields){if("mapshape"==r.tb&&"db2poly"!=r.f)var o=r.coords;else var o=r.c?r.c.trim():"";var c=r.o}if(a)t.regulars.push(e.extend(r,{div:n}));else{var u=h(r,i)?"exclusives":"regulars";if(t[u].length>0&&p(r,t[u]))T.standardFields&&(t[u][t[u].length-1].value=t[u][t[u].length-1].value+","+r.value),x(r)?t[u][t[u].length-1].c=t[u][t[u].length-1].c.replace(l,"$1,"+o.replace(l,"$1")+"$2"):t[u][t[u].length-1].c=t[u][t[u].length-1].c+","+o;else{if(!T.standardFields){var m=r.f,f=r.d;if(x(r)&&o.indexOf("..")!=-1){var v=o.match(/^\w\w-/)?o.substr(0,2):null,g=o.substring(v?3:0,o.indexOf("where")).trim().split("..");g.length<2&&(g=[0,0]),m="list_nbr",c="between",f="Listings "+(v?"in "+v:"")+" from "+g[0]+" to "+g[1],o=g[0]+" and "+g[1]+(v?" and prefix='"+v+"'":"")+" and ma_tech_id="+r.g}}T.standardFields?t[u].push({name:r.name,value:r.value,display_type:r.display_type}):t[u].push({tb:r.tb,f:m,o:"mapshape"==r.tb||"overlays"==r.tb?s:c,c:o,d:f,r:i,g:r.g,t:"location",display_type:r.display_type})}}}else i="not of"==e("a",n).text()||"not within"==e("a",n).text()?"X":"R",i=(e(n).hasClass("uloc_Street_Address")||e(n).hasClass("uloc_MLS___List"))&&"of"==e("a",n).text()?"O":i,e(n).hasClass("isShape")&&"intersection"==e("a",n).text()&&(s="intersection")}),1==t.exclusives.length)return t.exclusives;if(t.exclusives.length>1){for(var d=[],n=t.exclusives.pop(),r=0;r<t.exclusives.length;r++)(!T.standardFields&&t.exclusives[r].tb==n.tb&&t.exclusives[r].f==n.f||T.standardFields&&t.exclusives[r].name==n.name)&&d.push(t.exclusives[r]);return d.push(n),d}return t.regulars}function p(e,a){var t=a[a.length-1];if(!T.standardFields&&"mapshape"==e.tb)return!1;if(!T.standardFields&&"list"==e.tb&&"address"==e.f)return!1;if(T.standardFields&&"UnparsedAddress"==e.name)return!1;if((!T.standardFields&&t.tb==e.tb&&t.f==e.f||T.standardFields&&t.name==e.name)&&(T.standardFields||t.display_type==e.display_type||"combo"==t.display_type||"combo"==e.display_type)){if(x(e)){for(var i=0;i<a.length;i++)if(x(a[i])&&a[i].g==e.g)return!0;return!1}if(T.standardFields||"list"==e.tb)return!0}return!1}function h(e,a){return"list"==e.tb&&"address"==e.f&&"R"==a||("tech_id_list"==e.f&&"R"==a||!(!T.standardFields||"ListingId"!==e.name&&"UnparsedAddress"!==e.name))}function u(e){var a=[];if("S"==e.display_type||"combo"==e.display_type){var t=e.display_val?e.display_val.split("|"):null;if(T.standardFields)for(var i=e.value.split(","),s=0;s<i.length;s++)a.push({name:e.name,value:i[s],field_display_val:e.field_display_val,display_val:t?t[s]:null,display_type:e.display_type,coords:e.coords,color:e.color,shapeId:e.shapeId});else for(var i="like"==e.o.trim()?e.c.split(","):e.c.substr(1,e.c.length-2).split("','"),s=0;s<i.length;s++){var l="like"==e.o.trim()?i[s]:"'"+i[s]+"'";a.push({tb:e.tb,f:e.f,o:e.o,c:l,d:e.d,r:e.r,g:e.g,display_val:t?t[s]:null,display_type:e.display_type,coords:e.coords,color:e.color,shapeId:e.shapeId})}}else if(T.standardFields&&"ListingId"==e.name){if(""!=e.value)for(var d=e.value.split(","),n=0;n<T.mls.length;n++)for(var s=0;s<d.length;s++)a.push({name:"ListingId",value:d[s].replace(/\s/g,""),display_val:d[s].replace(/\s/g,""),field_display_val:e.field_display_val,display_type:"T",coords:e.coords,color:e.color,shapeId:e.shapeId})}else if("list"==e.tb&&"tech_id"==e.f){var r=e.d.replace("List # of ","");if(""!=r)for(var d=r.split(","),n=0;n<T.mls.length;n++)for(var s=0;s<d.length;s++)a.push({tb:"list",f:"tech_id_list",o:"in",c:d[s].replace(/\s/g,"")+" where ma_tech_id="+xId(T.mls[n]),d:"MLS # List",r:e.r,g:xId(T.mls[n]),display_val:d[s].replace(/\s/g,""),display_type:"T",coords:e.coords,color:e.color,shapeId:e.shapeId})}else if("list"==e.tb&&"list_nbr"==e.f){var o="";e.c.match("prefix=")&&(o+=e.c.substr(e.c.indexOf("prefix='")+8,2)+"-"),o+=e.c.replace(/(\d+) and (\d+).+/,"$1..$2"),o=o.trim(),a.push({tb:"list",f:"tech_id_list",o:"in",c:o+" where ma_tech_id="+e.g,d:"MLS # List",r:e.r,g:e.g,display_val:o,display_type:"T",coords:e.coords,color:e.color,shapeId:e.shapeId})}else if("list"==e.tb&&"tech_id_list"==e.f){var r=e.c.replace(/ where ma_tech_id=x'\d{26}'/,"");if(""!=r)for(var d=r.split(","),s=0;s<d.length;s++)a.push({tb:"list",f:"tech_id_list",o:"in",c:d[s].replace(/\s/g,"")+" where ma_tech_id="+e.g,d:"MLS # List",r:e.r,g:e.g,display_val:d[s].replace(/\s/g,""),display_type:"T",coords:e.coords,color:e.color,shapeId:e.shapeId})}else if("T"==e.display_type&&"address"!=e.f&&"UnparsedAddress"!=e.name)for(var i=T.standardFields?e.value.split(","):e.c.split(","),t=e.display_val?e.display_val.split("|"):null,s=0;s<i.length;s++){if(T.privateAccess||0!==i[s].indexOf("="))var c=i[s];else var c=t[s]?t[s]:i[s].substring(1);T.standardFields?a.push({name:e.name,value:i[s],field_display_val:e.field_display_val,display_val:c,display_type:e.display_type,coords:e.coords,color:e.color,shapeId:e.shapeId}):a.push({tb:e.tb,f:e.f,o:e.o,c:i[s],d:e.d,r:e.r,g:e.g,display_val:c,display_type:e.display_type,coords:e.coords,color:e.color,shapeId:e.shapeId})}else e.display_val||(e.display_val=T.standardFields?e.value:e.c),a.push(e);return a}function m(e){if(!e)return null;for(var a=null,e=xId(e),t=0;t<T.datashareInformation.length;t++)if(xId(T.datashareInformation[t].tech_id)==e){a=T.datashareInformation[t];break}return a}function f(a,t){spotlight.show(a,{id:T.inlineEditId,html:"<input type='text' value='"+e(t).data("srchObj").display_val+"' />",width:300,close:!0,left:-35,top:-6,zIndex:9999998}),e("div#"+T.inlineEditId).addClass("inlineTextEditDiv"),e("div#"+T.inlineEditId+" input").keypress(function(){setTimeout(function(){var i=e("div#"+T.inlineEditId+" input").val();x(e(t).data("srchObj"))&&(i=i.replace(/\s/g,"")),T.standardFields?e(t).data("srchObj").value=i:e(t).data("srchObj").c="tech_id_list"==e(t).data("srchObj").f?i+" where ma_tech_id="+e(t).data("srchObj").g:i,e(t).data("srchObj").display_val=i,e(e(a),e(t)).text(i),T.updateCallback&&T.updateCallback.apply(document.body,[e(t).data("srchObj")])},10)}).bind(e.browser.opera?"keypress":"keydown",function(e){27!=e.keyCode&&13!=e.keyCode&&3!=e.keyCode||spotlight.hide(T.inlineEditId)}).focus()}function v(a,t){for(var i=["<select size='"+T.datashareInformation.length+"'>"],s=0;s<T.datashareInformation.length;s++)i.push("<option value='"+s+"' "+(e(t).data("srchObj").g==xId(T.datashareInformation[s].tech_id)?"selected='selected'":"")+">"+T.datashareInformation[s].name.quote("js")+"</option>");i.push("</select>"),spotlight.show(a,{id:T.inlineMLSEditId,html:i.join(""),width:300,close:!0,left:-35,top:-5,zIndex:9999998}),e("div#"+T.inlineMLSEditId+" select").change(function(){setTimeout(function(){var a=T.datashareInformation[e("div#"+T.inlineMLSEditId+" select").val()];if(!T.standardFields){var i=e(t).data("srchObj").c.replace(/ where ma_tech_id=x'\d{26}'/,"");e(t).data("srchObj").c=i+" where ma_tech_id="+xId(a.tech_id)}e(t).data("srchObj").g=xId(a.tech_id),e("a:last",e(t)).text(a.abbr.toUpperCase()),spotlight.hide(T.inlineMLSEditId),T.updateCallback&&T.updateCallback.apply(document.body,[e(t).data("srchObj")])},10)}).bind(e.browser.opera?"keypress":"keydown",function(e){27!=e.keyCode&&13!=e.keyCode&&3!=e.keyCode||spotlight.hide(T.inlineMLSEditId)}).focus()}function g(a){var t=null;return e("div.location",w).each(function(i,s){if(e(s).data("srchObj").shapeId&&e(s).data("srchObj").shapeId==a)return t=e(s),!1}),t}function b(e){if(!e)return null;if(T.standardFields)if("ListingId"==e.name)var a="MLS # List";else if("UnparsedAddress"==e.name)var a="Street Address";else var a=e.field_display_val||e.name;else if("mapshape"==e.tb)var a="Shape";else if("overlays"==e.tb)var a=e.d.substring(0,e.d.indexOf("||"));else var a=e.d;return{display_val:a,class_name:"uloc_"+a.replace(/\W/g,"_")}}function y(a){var t="dashed"==a.color?e("<div>").css("backgroundColor","#c2d7ff").css("border","1px dashed #0069ff"):e("<div>").css("backgroundColor",a.color);return t.addClass("color").html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"),t}function _(a,t){e(a).mouseover(function(){e(this).css("backgroundColor",T.animationColor),T.mapDocument.myFBSMapLoaded&&T.mapDocument.shapeHighlight(!0,t.shapeId)}).mouseout(function(){e(this).css("backgroundColor",T.backgroundColor),T.mapDocument.myFBSMapLoaded&&T.mapDocument.shapeHighlight(!1,t.shapeId)})}function C(a){var t=null;return e("div.location",w).each(function(i,s){var l=e(s).data("srchObj");if(T.standardFields){if(l.name==a.name&&l.value==a.value)return t=e(s),!1}else{var d="combo"==l.display_type?"'"+l.c+"'":l.c;if(l.tb==a.tb&&l.f==a.f&&d==a.c&&"mapshape"!=l.tb)return t=e(s),!1}}),t}function x(e){if(T.standardFields){if("ListingId"==e.name)return!0}else if("list"==e.tb&&"tech_id_list"==e.f)return!0;return!1}function k(e){return!(T.standardFields||"mapshape"!==e.tb&&"overlays"!==e.tb)||!(!T.standardFields||"MapOverlay"!==e.name)}function I(e){return!T.standardFields&&"overlays"===e.tb||!(!T.standardFields||"MapOverlay"!==e.name)}var w=e(a).addClass("uloc_lister_container"),L={base_url:"",mls:[],propertyType:[],animation:!0,animationColor:"#f7f7c1",backgroundColor:"#f6f6f6",defaultText:"",standardFields:!1,privateAccess:!1,operatorAccess:!0,inlineEditId:"inlineEdit"+Math.floor(1e11*Math.random()),inlineMLSEditId:"inlineMLSEdit"+Math.floor(1e11*Math.random()),datashareInformation:[],debug:!1},T=e.extend(L,t);if(!T.tech_id)throw"LOCATION LIST: You must include the tech_id of the current user";if(!e.isArray(T.mls)||0===T.mls.length)throw"LOCATION LIST: You must include the MLS you wish to search";if(!e.isArray(T.propertyType)||0===T.propertyType.length)throw"LOCATION LIST: You must include the property types you wish to search";return""!=T.defaultText?w.html("<p>"+T.defaultText+"</p>"):w.hide(),{create:i,update:s,destroy:l,destroyAll:d,compile:c,changePropertyType:n,findDivByShapeId:g}},e.Location.Cacher=function(a,t,i,s,l){function d(a,t){c[a+o]=e.extend(!0,{},t),p.push(a+o),p.length>l&&(c[p.shift()]=null)}function n(e){return c[e+o]}function r(e,a,t,i){o=(t?"s_":"p_")+(i?"priv_":"pub_")+e.join("")+a.join("")}var l=l?l:60,o=null,c={},p=[];return r(a,t,i,s),{put:d,fetch:n,updateSalt:r}},e.Location.Utilities=function(e){return{fieldLabel:function(a){return e?a.field_display_val:"overlays"==a.tb?a.d.substring(0,a.d.indexOf("||")):a.d}}}}(jQuery);
var spotlight={};spotlight.show=function(t,o){if(!o)var o={};o.id||(o.id="spotlight_"+Math.floor(1e16*Math.random())),o.html||(o.html="Insert HTML here..."),o.zIndex||(o.zIndex=100),o.width=o.width?o.width:150;var e=["position:absolute;padding:4px 10px;border-radius:10px; -moz-border-radius:10px; -webkit-border-radius:10px;"];e.push("background-color:"+(o.backgroundColor?o.backgroundColor:"#fff9d7")+";"),e.push("border:1px solid "+(o.borderColor?o.borderColor:"#e2c822")+";"),e.push("color:"+(o.color?o.color:"#000")+";"),e.push("font-size:"+(o.fontSize?o.fontSize:"9pt")+";"),e.push("width:"+o.width+"px;z-index:"+o.zIndex+";");var i=o.orientation&&"left"==o.orientation?"-":"";e.push("-moz-box-shadow:"+i+"3px 3px 10px #333;"),e.push("-webkit-box-shadow:"+i+"3px 3px 10px #333;"),e.push("box-shadow:"+i+"3px 3px 10px #333;"),e.push("filter:progid:DXImageTransform.Microsoft.DropShadow(color=#888888, offx="+i+"1, offy=1)progid:DXImageTransform.Microsoft.DropShadow(color=#cccccc, offx="+i+"1, offy=1);");var r=jQuery("#"+o.id).length>0?jQuery("#"+o.id):jQuery("<div class='spotlight' id='"+o.id+"' >");if(r.html(o.html),o.cancelCookie){var n=jQuery("<div style='text-align:center;padding-top:1em;'></div>");n.prepend(jQuery("<a title='stop showing this message' style='cursor:pointer;'></a>").html("Don't show this message again").click(function(){spotlight.optout(o.id,o.cancelCookie)})).appendTo(r)}o.close&&r.prepend(jQuery("<a title='close' style='"+(o.closeColor?"color:"+o.closeColor+";":"")+"cursor:pointer;font-size:11pt;text-decoration:none;position:relative;float:right;padding-left:6px;top:-4px;right:-2px;'></a>").html("&times;").click(function(){spotlight.hide(o.id)}));var s=jQuery(t).offset();if(o.left&&(s.left=s.left+o.left),o.top&&(s.top=s.top+o.top),o.orientation){var p=isNaN(o.orientationBuffer)?2:o.orientationBuffer,d=20,l=2;"above"==o.orientation&&(s.bottom=jQuery(window).height()-s.top+p),"below"==o.orientation&&(s.top+=t.offsetHeight+p),"left"==o.orientation&&(s.left-=o.width+d+p+l),"right"==o.orientation&&(s.left+=t.offsetWidth+p)}return s.top<0&&(s.top=0),s.left<0&&(s.left=0),e.push("left:"+s.left+"px;"),s.bottom?e.push("bottom:"+s.bottom+"px;"):e.push("top:"+s.top+"px;"),r.attr("z",o.zIndex).attr("style",e.join("")),jQuery("#"+o.id).length>0&&(document.getElementById(o.id).style.cssText=e.join("")),jQuery("#"+o.id).length>0?r.show():r.appendTo("body"),navigator.userAgent.match("MSIE 6")&&spotlight.shim(o.id),o.closeTimer&&parseInt(o.closeTimer)>0&&setTimeout("spotlight.hide('"+o.id+"')",parseInt(o.closeTimer)),o.id},spotlight.hide=function(t){jQuery("div#"+t+", iframe#"+t+"_shim").remove()},spotlight.optout=function(t,o){var e=new Date;e.setTime(e.getTime()+31536e6);var i="; expires="+e.toGMTString();document.cookie=o+"=true"+i+"; path=/",document.getElementById(t)&&document.getElementById(t).parentNode.removeChild(document.getElementById(t))},spotlight.shim=function(t){var o=document.getElementById(t),e=jQuery(o),i=jQuery("iframe#"+t+"_shim");if(i.length>0)i.css({width:e.width()+22,height:e.height()+10});else{var r=e.offset();jQuery("<iframe>").attr("id",t+"_shim").attr("src","about:blank").attr("frameBorder",0).attr("scrolling","no").css({width:e.width(),height:e.height(),position:"absolute",top:r.top,left:r.left,margin:0,zIndex:o.z-1}).appendTo("body")}};
!function(e){e(document).ready(function(e){e("#flexmls_connect__admin_srf_table").length&&t.init("#flexmls_connect__admin_srf_table")});var t={table:null,newFieldSelect:null,rowTemplate:"",init:function(n){t.table=e(n),t.rowTemplate=t.table.data("template"),t.insertCurrentFields(),t.table.sortable({items:".flexmls_connect__admin_srf_row",cursor:"move",axis:"y",opacity:.7,placeholder:"flexmls_connect__admin_srf_placeholder"}),t.newFieldSelect=e(".flexmls_connect__admin_srf_add_new").chosen(),t.bindDelete(),t.bindNewFieldSelect()},insertCurrentFields:function(){var n=t.table.data("fields"),l="";e.each(n,function(e,n){l+=t.buildRow(e,n)}),t.table.append(l)},buildRow:function(e,n){return t.rowTemplate.replace(/{{field_id}}/g,e).replace(/{{display_name}}/g,n)},bindDelete:function(){e(".flexmls_connect__admin_srf_delete").click(function(t){t.preventDefault(),e(this).parent().slideUp().animate({opacity:0},function(){e(this).remove()}).dequeue()})},bindNewFieldSelect:function(){t.newFieldSelect.change(function(){var n=e(this).val(),l=e("option:selected",e(this)).text(),i=e(t.buildRow(n,l));i.css({position:"relative",opacity:"0",height:"0",top:"30px",display:"none"}),t.table.append(i),i.slideDown().animate({opacity:1,height:"100%",top:0},function(){e(this).attr("style","")}).dequeue(),t.bindDelete(),t.clearSelection()})},clearSelection:function(){t.newFieldSelect.val("").trigger("chosen:updated")}}}(jQuery);