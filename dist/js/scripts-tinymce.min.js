!function(t){var e=function(t){return{title:"General Search",body:[{type:"listbox",name:"style",label:"Style",values:[{text:"Clear",value:"clear"},{text:"White",value:"white"},{text:"Colour 1",value:"colour1"},{text:"Colour 2",value:"colour2"},{text:"Colour 3",value:"colour3"}]}],onsubmit:function(e){t.insertContent('[container style="'+e.data.style+'"]<br /><br />[/container]')}}},o=function(t){var e="Contact Me",o="",n="Thank you for your request",l="Submit",a=tinyMCE.activeEditor.selection.getContent({format:"text"});if(!0==!!a){var i=wp.shortcode.next("flexmls_leadgen",a,0);if(!0==!!i)try{var r=i.shortcode.attrs.named;r.hasOwnProperty("title")&&(e=r.title),r.hasOwnProperty("blurb")&&(o=r.blurb),r.hasOwnProperty("success")&&(n=r.success),r.hasOwnProperty("buttontext")&&(l=r.buttontext)}catch(t){console.log("Error"),console.log(t)}}return{title:"Lead Generation",body:[{type:"textbox",name:"title",label:"Title",size:42,value:e},{type:"textbox",name:"blurb",label:"Description",multiline:!0,tooltip:"Optional: this text appears below the title",value:o},{type:"textbox",name:"success",label:"Success Message",multiline:!0,tooltip:"Appears after the message is sent successfully",value:n},{type:"textbox",name:"buttontext",label:"Button Text",tooltip:"Customize the text of the submit button",value:l}],onsubmit:function(e){var o={};o.title=JSON.stringify(e.data.title).slice(1,-1),o.blurb=JSON.stringify(e.data.blurb).slice(1,-1),o.success=JSON.stringify(e.data.success).slice(1,-1),o.buttontext=JSON.stringify(e.data.buttontext).slice(1,-1);var n=wp.shortcode.string({tag:"flexmls_leadgen",attrs:o,type:"single"});t.insertContent(n)}}},n=function(t){return{title:"1-Click Location Search",body:[{type:"listbox",name:"style",label:"Style",values:[{text:"Clear",value:"clear"},{text:"White",value:"white"},{text:"Colour 1",value:"colour1"},{text:"Colour 2",value:"colour2"},{text:"Colour 3",value:"colour3"}]}],onsubmit:function(e){t.insertContent('[container style="'+e.data.style+'"]<br /><br />[/container]')}}},l=function(t){return{title:"Market Statistics",body:[{type:"listbox",name:"style",label:"Style",values:[{text:"Clear",value:"clear"},{text:"White",value:"white"},{text:"Colour 1",value:"colour1"},{text:"Colour 2",value:"colour2"},{text:"Colour 3",value:"colour3"}]}],onsubmit:function(e){t.insertContent('[container style="'+e.data.style+'"]<br /><br />[/container]')}}},a=function(t){return{title:"Portal Widget",body:[{type:"listbox",name:"style",label:"Style",values:[{text:"Clear",value:"clear"},{text:"White",value:"white"},{text:"Colour 1",value:"colour1"},{text:"Colour 2",value:"colour2"},{text:"Colour 3",value:"colour3"}]}],onsubmit:function(e){t.insertContent('[container style="'+e.data.style+'"]<br /><br />[/container]')}}},i=function(t){return{title:"IDX Slideshow",body:[{type:"listbox",name:"style",label:"Style",values:[{text:"Clear",value:"clear"},{text:"White",value:"white"},{text:"Colour 1",value:"colour1"},{text:"Colour 2",value:"colour2"},{text:"Colour 3",value:"colour3"}]}],onsubmit:function(e){t.insertContent('[container style="'+e.data.style+'"]<br /><br />[/container]')}}};tinymce.PluginManager.add("flexmlsidx",function(r,s){function u(){var e="Saved Searches",o=tinyMCE.activeEditor.selection.getContent({format:"text"});if(!0==!!o){var n=wp.shortcode.next("flexmls_idxlinks",o,0);if(!0==!!n)try{var l=n.shortcode.attrs.named;l.hasOwnProperty("title")&&(e=l.title),l.hasOwnProperty("idx_link")&&l.idx_link}catch(t){console.log("Error"),console.log(t)}}r.windowManager.open({title:"IDX Links",body:[{type:"textbox",name:"title",label:"Title",size:42,value:e},{type:"container",name:"idxlinks",label:"IDX Link(s)",ondata:function(){this.parentsAndSelf().reflow()},onpostrender:function(e){var o=this;t.post(ajaxurl,{action:"tinymce_get_idx_links"},function(t){var e=o.create(t);o.append(e).reflow().repaint(),o.fire("data")},"json")},items:[]}],onsubmit:function(t){r.insertContent('[container style="'+t.data.style+'"]<br /><br />[/container]')}})}r.addButton("flexmlsidx_shortcodes",{type:"menubutton",tooltip:"Add a Flexmls widget",title:"Add Flexmls Widget",image:flexmls.pluginurl+"/dist/assets/tinymce_flexmls_pin.png",menu:[{text:"1-Click Location Search",onclick:function(){r.windowManager.open(n(r))}},{text:"General Search",onclick:function(){r.windowManager.open(e(r))}},{text:"IDX Links",onclick:u},{text:"IDX Slideshow",onclick:function(){r.windowManager.open(i(r))}},{text:"Lead Generation",onclick:function(){r.windowManager.open(o(r))}},{text:"Market Statistics",onclick:function(){r.windowManager.open(l(r))}},{text:"Portal Widget",onclick:function(){r.windowManager.open(a(r))}}]})})}(jQuery);